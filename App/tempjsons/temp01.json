{
    "apiVersion": "extensions/v1beta1",
    "kind": "Deployment",
    "metadata": {
        "annotations": {
            "azure-pipelines/jobName": "deploy Web App",
            "azure-pipelines/org": "https://bupaaunz.visualstudio.com/",
            "azure-pipelines/pipeline": "Sentinel.Api.Comms",
            "azure-pipelines/pipelineId": "3130",
            "azure-pipelines/project": "AKS_Experiment",
            "azure-pipelines/run": "20200526.4",
            "azure-pipelines/runuri": "https://bupaaunz.visualstudio.com/AKS_Experiment/_build/results?buildId=225157",
            "deployment.kubernetes.io/revision": "3"
        },
        "creationTimestamp": "2020-05-25T15:36:10Z",
        "generation": 3,
        "labels": {
            "app": "comms-api",
            "app.kubernetes.io/instance": "sentinel-dev-comms-api",
            "app.kubernetes.io/managed-by": "Helm",
            "app.kubernetes.io/name": "comms-api",
            "app.kubernetes.io/version": "1.0",
            "branch": "master",
            "helm.sh/chart": "comms-api-2.0.0-20200526.4",
            "version": "1.0"
        },
        "name": "sentinel-dev-comms-api",
        "namespace": "sentinel-dev",
        "resourceVersion": "11812415",
        "selfLink": "/apis/extensions/v1beta1/namespaces/sentinel-dev/deployments/sentinel-dev-comms-api",
        "uid": "b6bf0a3b-e8e1-4d80-9619-c6bfc7ee5c25"
    },
    "spec": {
        "progressDeadlineSeconds": 2147483647,
        "replicas": 1,
        "revisionHistoryLimit": 1,
        "selector": {
            "matchLabels": {
                "app": "comms-api",
                "app.kubernetes.io/instance": "sentinel-dev-comms-api",
                "app.kubernetes.io/name": "comms-api",
                "branch": "master",
                "version": "1.0"
            }
        },
        "strategy": {
            "rollingUpdate": {
                "maxSurge": 1,
                "maxUnavailable": 1
            },
            "type": "RollingUpdate"
        },
        "template": {
            "metadata": {
                "annotations": {
                    "azure-pipelines/jobName": "deploy Web App",
                    "azure-pipelines/org": "https://bupaaunz.visualstudio.com/",
                    "azure-pipelines/pipeline": "Sentinel.Api.Comms",
                    "azure-pipelines/pipelineId": "3130",
                    "azure-pipelines/project": "AKS_Experiment",
                    "azure-pipelines/run": "20200526.4",
                    "azure-pipelines/runuri": "https://bupaaunz.visualstudio.com/AKS_Experiment/_build/results?buildId=225157"
                },
                "creationTimestamp": null,
                "labels": {
                    "app": "comms-api",
                    "app.kubernetes.io/instance": "sentinel-dev-comms-api",
                    "app.kubernetes.io/name": "comms-api",
                    "branch": "master",
                    "version": "1.0"
                }
            },
            "spec": {
                "containers": [{
                    "env": [{
                        "name": "DOTNET_RUNNING_IN_CONTAINER",
                        "value": "true"
                    }],
                    "envFrom": [{
                            "configMapRef": {
                                "name": "sentinel-dev-comms-api-config"
                            }
                        },
                        {
                            "secretRef": {
                                "name": "sentinel-dev-comms-api-secret"
                            }
                        }
                    ],
                    "image": "mmercan/sentinel-api-comms:20200526.4",
                    "imagePullPolicy": "Always",
                    "livenessProbe": {
                        "failureThreshold": 3,
                        "httpGet": {
                            "path": "/",
                            "port": "http",
                            "scheme": "HTTP"
                        },
                        "periodSeconds": 10,
                        "successThreshold": 1,
                        "timeoutSeconds": 1
                    },
                    "name": "comms-api",
                    "ports": [{
                        "containerPort": 80,
                        "name": "http",
                        "protocol": "TCP"
                    }],
                    "readinessProbe": {
                        "failureThreshold": 3,
                        "httpGet": {
                            "path": "/",
                            "port": "http",
                            "scheme": "HTTP"
                        },
                        "periodSeconds": 10,
                        "successThreshold": 1,
                        "timeoutSeconds": 1
                    },
                    "resources": {},
                    "terminationMessagePath": "/dev/termination-log",
                    "terminationMessagePolicy": "File"
                }],
                "dnsPolicy": "ClusterFirst",
                "restartPolicy": "Always",
                "schedulerName": "default-scheduler",
                "securityContext": {},
                "serviceAccount": "sentinel-dev-comms-api",
                "serviceAccountName": "sentinel-dev-comms-api",
                "terminationGracePeriodSeconds": 30
            }
        }
    },
    "status": {
        "conditions": [{
                "lastTransitionTime": "2020-05-25T15:36:10Z",
                "lastUpdateTime": "2020-05-25T15:36:10Z",
                "message": "Deployment has minimum availability.",
                "reason": "MinimumReplicasAvailable",
                "status": "True",
                "type": "Available"
            },
            {
                "lastTransitionTime": "2020-07-30T12:04:04Z",
                "lastUpdateTime": "2020-07-30T12:04:04Z",
                "message": "Internal error occurred: failed calling webhook \"sidecar-injector.istio.io\": Post https://istiod.istio-system.svc:443/inject?timeout=30s: net/http: request canceled (Client.Timeout exceeded while awaiting headers)",
                "reason": "FailedCreate",
                "status": "True",
                "type": "ReplicaFailure"
            }
        ],
        "observedGeneration": 3,
        "unavailableReplicas": 1
    }
}